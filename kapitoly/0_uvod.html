
<!DOCTYPE html>

<html lang="cs">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Úvod &#8212; Školení PostGIS pro pokročilé</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gismentors.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/translations.js"></script>
    <link rel="search" title="Vyhledávání" href="../search.html" />
    <link rel="next" title="Vytváříme prostorovou databázi" href="1_vytvarime_prostorovou_db.html" />
    <link rel="prev" title="Obsah" href="../index.html" /> 
  </head><body>
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="../index.html">Školení PostGIS pro pokročilé</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="../index.html" title="Obsah"
             accesskey="P">předchozí</a> |
          <a href="1_vytvarime_prostorovou_db.html" title="Vytváříme prostorovou databázi"
             accesskey="N">další</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="uvod">
<h1>Úvod<a class="headerlink" href="#uvod" title="Permalink to this heading">¶</a></h1>
<p><strong>PostGIS</strong> rozšiřuje možnosti relační databáze <a class="reference external" href="http://www.postgresql.org">PostgreSQL</a> o ukládání, správu a dotazování
geografické (prostorové) informace. Po instalaci rozšíření PostGIS do
databáze jsou dostupné nové operátory, funkce, typy a relace. Pomocí
PostGISu je možné zpracovávat jak vektorová, tak rastrová data. Nad
vektorovými daty lze dokonce vybudovat topologii a dotazovat se na
ni. Nejobvyklejším využitím je ovšem práce s jednoduchými prvky,
tzv. <em>simple features</em>, viz <a class="reference external" href="http://training.gismentors.eu/postgis-zacatecnik/kapitoly/1_uvod#prostorova_db">školení pro začátečníky</a>.</p>
<section id="obecna-doporuceni">
<h2>Obecná doporučení<a class="headerlink" href="#obecna-doporuceni" title="Permalink to this heading">¶</a></h2>
<p>Začneme několika obecnými doporučeními. Vesměs se jedná o samozřejmé
věci. Domníváme se nicméně, že stojí za to si je připomenout.</p>
<section id="indexujte">
<h3>Indexujte<a class="headerlink" href="#indexujte" title="Permalink to this heading">¶</a></h3>
<p>Indexujte, pokud nebudete používat indexy, je skoro jedno, jestli
budete ukládat data do databáze, nebo jen tak, do textových
souborů. Index si můžeme představit jako rejstřík u knihy, pokud kniha
nemá rejstřík, jediný způsob, jak najít nějakou informaci, je pročítat
knihu, dokud požadované údaje nenajdeme.  U PostgreSQL navíc (až na
výjimky) platí, že musí načíst z datové stránky celý záznam, aby se
dobralo hodnoty konkrétní položky.</p>
<p>Od jakého množství záznamů se vyplatí tabulky indexovat záleží na mnoha věcech.
Na typu dat, výkonu hardware, nastavení PostgreSQL. Při velké míře zobecnění se
dá říct, že indexovat má cenu tabulky od velikosti několika tisíc záznamů.</p>
<p>Geometrické atribututy indexujte pomocí metody <a class="reference external" href="http://www.postgresql.org/docs/current/static/gist.html">GiST</a>. Číselné hodnoty a řetězce obvykle pomocí <a class="reference external" href="http://www.postgresql.org/docs/current/static/indexes-types.html">b-tree
indexu</a>.</p>
<div class="noteadvanced admonition">
<p class="admonition-title">Poznámka pro pokročilé</p>
<p>Zda byl index použit v konkrétním dotazu můžeme zjistit pomocí
klauzule <a class="reference external" href="https://www.postgresql.org/docs/current/static/sql-explain.html">EXPLAIN</a>,
která zobrazí prováděcí plán. Kolikrát byl index skutečně
použit zjistíme dotazem do systémového katalogu
<a class="reference external" href="https://www.postgresql.org/docs/current/static/monitoring-stats.html#PG-STATIO-ALL-INDEXES-VIEW">pg_stat_all_indexes</a>.</p>
</div>
</section>
<section id="pouzivejte-transakce">
<h3>Používejte transakce<a class="headerlink" href="#pouzivejte-transakce" title="Permalink to this heading">¶</a></h3>
<p>Transakce jsou neprávem považovány za jakýsi „databázistický folklór“
spojený s tím otřepaným povídáním o částce, která musí být zároveň
přidána na jeden bankovní účet a odebrána z druhého. Transakce mají
však podstatně širší využítí. Obzvlášť pokud zasahujete do datových
struktur s komplikovanými vazbami, může vám použití transakcí ušetřit
mnoho práce s napravováním paseky v datech. Nemluvě o tom, že pokud
jste v transakci, nemusíte se bát, že něco pokazíte, dokud
nespustíte COMMIT. Můžete tedy provést změny, otestovat pár dotazů,
jestli se všechno chová jak má a teprve pak potvrdit změny v databázi.</p>
<p>Na druhou stranu je ovvšem třeba pamatovat na to, že neukončená transakce může
zamknout tabulky a znemožnit ostatním uživatelům efektivně pracovat s databází.</p>
<div class="noteadvanced admonition">
<p class="admonition-title">Poznámka pro pokročilé</p>
<p>Vzájemná izolace transakcí při současném zápisu je realizovaná
prostřednictvím <a class="reference external" href="http://postgres.cz/wiki/Slovník#MVCC">multigenerační architektury</a>.</p>
</div>
</section>
<section id="venujte-dostatecnou-pozornost-navrhu-struktur">
<h3>Věnujte dostatečnou pozornost návrhu struktur<a class="headerlink" href="#venujte-dostatecnou-pozornost-navrhu-struktur" title="Permalink to this heading">¶</a></h3>
<p>Velkou chybou je podcenění návrhu databázových struktur. Čas
investovaný do návrhu datového modelu se vám mnohonásobně
vrátí. Převést data z nedostačující struktury je navíc obvykle velmi
pracné a nese sebou riziko poškození dat.</p>
</section>
<section id="naladte-si-postgresql">
<h3>Nalaďte si PostgreSQL<a class="headerlink" href="#naladte-si-postgresql" title="Permalink to this heading">¶</a></h3>
<p>Je třeba si uvědomit, že PostgreSQL je objektově relační databázový
systém (systém pro řízení báze dat). Ukládání dat do databáze se v
mnohém liší od ukládání dat do souborů. K dosažení maximální
efektivity je třeba PostgreSQL správně nastavit. Rozdíl v rychlosti
mezi správně nastavenou databází a výchozím nastavením může
být klidně o několik řádů. PostgreSQL se nastavuje jednak s ohledem na
hardware a jednak i s ohledem na požadované využití (předpokládaný
počet paralelně připojených uživatelů, velikost tabulek
atd.). Nastavení se provádí ručně a je netriviální. Pokud uděláte
zásadní chybu, hrozí havárie a to včetně rizika poškození dat. Pokud
se na to necítíte nebo nevíte přesně co děláte, je rozumné si nechat
poradit.</p>
<p>Základní úvod do problematiky je možné nabýt třeba <a class="reference external" href="http://www.linuxexpres.cz/praxe/optimalizace-postgresql">zde</a>.</p>
<div class="admonition note">
<p class="admonition-title">Poznámka</p>
<p>Základní nastavení PostgreSQL po instalaci je obvykle velice šetrné ke
zdrojům, na úkor výkonu. Je to proto, aby bylo možné PostgreSQL pustit
i na nevýkonném počítači bez rizika havárie systému. Základní
nastavení je možné provést pomocí nástroje <a class="reference external" href="http://pgtune.leopard.in.ua/">pgTune</a>,
které přizpůsobí nastavení PostgreSQL výkonu Vašeho hardware.</p>
</div>
</section>
<section id="naucte-se-pouzivat-psql">
<h3>Naučte se používat psql<a class="headerlink" href="#naucte-se-pouzivat-psql" title="Permalink to this heading">¶</a></h3>
<p>Psql je konzolový klient pro PostgreSQL, přestože působí poněkud
spartánsky, jedná se o nástroj se kterým je možné dosáhnout největší
efektivity. Specialitou jsou tzv. metapříkazy. Použití psql v
příkazové řádce či skriptech je velice mocná kombinace.</p>
</section>
</section>
<section id="kdy-je-vyhodnejsi-pouzit-jiny-nastroj">
<h2>Kdy je výhodnější použít jiný nástroj<a class="headerlink" href="#kdy-je-vyhodnejsi-pouzit-jiny-nastroj" title="Permalink to this heading">¶</a></h2>
<p>Je třeba si uvědomit, že PostGIS není analytický nástroj, ale
rozšíření databáze. Přestože v něm jde vyřešit drtivá většina úloh, se
kterými se můžeme ve své praxi setkávat, ne vždy se jedná o řešení
nejjednodušší, nejelegantnější a nejsprávnější. Vzhledem k tomu, že
PostGIS samotný pracuje se <em>simple features</em>, tj. jednoduchými geoprvky
(ačkoliv existuje i rozšíření <a class="reference internal" href="8_topologie.html"><span class="doc">Topology</span></a>), je využití PostGISu pro
analytické úlohy do jisté míry limitováno možnostmi jednoduchých
prvků. Dost velká omezení přináší také práce s velkými (co do množství
lomových bodů) prvky nebo prvky hodně členitými.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          
          <h3>Table of Contents</h3>
          <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Úvod</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#obecna-doporuceni">Obecná doporučení</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#indexujte">Indexujte</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pouzivejte-transakce">Používejte transakce</a></li>
<li class="toctree-l3"><a class="reference internal" href="#venujte-dostatecnou-pozornost-navrhu-struktur">Věnujte dostatečnou pozornost návrhu struktur</a></li>
<li class="toctree-l3"><a class="reference internal" href="#naladte-si-postgresql">Nalaďte si PostgreSQL</a></li>
<li class="toctree-l3"><a class="reference internal" href="#naucte-se-pouzivat-psql">Naučte se používat psql</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#kdy-je-vyhodnejsi-pouzit-jiny-nastroj">Kdy je výhodnější použít jiný nástroj</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="1_vytvarime_prostorovou_db.html">Vytváříme prostorovou databázi</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_tvorba_jednoduche_prostorove_tabulky.html">Vytváříme prostorovou tabulku</a></li>
<li class="toctree-l1"><a class="reference internal" href="3_shp2pgsql_a_davkove_nahrani.html">Dávkové nahrání dat</a></li>
<li class="toctree-l1"><a class="reference internal" href="4_prostorove_operatory.html">Operátory datového typu geometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="5_prostorove_funkce.html">Prostorové funkce</a></li>
<li class="toctree-l1"><a class="reference internal" href="6_obludy.html">Praktické příklady</a></li>
<li class="toctree-l1"><a class="reference internal" href="7_finty.html">Efektivní práce</a></li>
<li class="toctree-l1"><a class="reference internal" href="8_topologie.html">Topologie</a></li>
<li class="toctree-l1"><a class="reference internal" href="9_rastry.html">Rastrová data</a></li>
<li class="toctree-l1"><a class="reference internal" href="10_routing.html">Síťové analýzy</a></li>
<li class="toctree-l1"><a class="reference internal" href="11_zaver.html">A co dál?</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Vyhledávání</h3>
            <form class="search" action="../search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="OK" />
            </form>
          </div>

        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="../index.html" title="Obsah"
              >předchozí</a> |
            <a href="1_vytvarime_prostorovou_db.html" title="Vytváříme prostorovou databázi"
              >další</a>
          </div>
          <div role="note" aria-label="source link">
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014-2023 GISMentors.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>